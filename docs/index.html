<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tidy Interface to data.table • tidytable</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tidy Interface to data.table">
<meta property="og:description" content="Tidy interface to data.table. rlang compatible, which allows the user to build custom functions much like they would in the tidyverse.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tidytable</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/markfairbanks/tidytable/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tidytable" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tidytable" class="anchor"></a>tidytable <img src="reference/figures/logo.png" align="right" width="16%" height="16%">
</h1></div>
<!-- badges: start -->

<p>The goal of <code>tidytable</code> is to be a tidy interface to <code>data.table</code>.</p>
<div id="why-tidytable" class="section level4">
<h4 class="hasAnchor">
<a href="#why-tidytable" class="anchor"></a>Why <code>tidytable</code>?</h4>
<ul>
<li>
<code>tidyverse</code>-like syntax with <code>data.table</code> speed</li>
<li>
<code>rlang</code> compatibility - <a href="https://markfairbanks.github.io/tidytable/#rlang-compatibility">See here</a>
</li>
<li>Includes functions that <a href="https://github.com/tidyverse/dtplyr"><code>dtplyr</code></a> is missing, including many <code>tidyr</code> functions</li>
</ul>
<p>Note: <code>tidytable</code> functions do not use <code>data.table</code>’s modify-by-reference, and instead use the copy-on-modify principles followed by the <code>tidyverse</code> and base R.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the released version from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"tidytable"</span>)</pre></div>
<p>Or install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"markfairbanks/tidytable"</span>)</pre></div>
</div>
<div id="tidytable-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#tidytable-functions" class="anchor"></a>tidytable functions</h2>
<p><strong>Enhanced selection support denoted by ES</strong> <a href="https://markfairbanks.github.io/tidytable/#enhanced-selection">See examples here</a></p>
<div id="tidytable-helpers" class="section level3">
<h3 class="hasAnchor">
<a href="#tidytable-helpers" class="anchor"></a>tidytable helpers</h3>
<ul>
<li>
<code><a href="reference/dt.html">dt()</a></code>: Pipeable <code>data.table</code> syntax. <a href="https://markfairbanks.github.io/tidytable/#dt-helper">See here</a>
</li>
<li><code><a href="reference/get_dummies..html">get_dummies.()</a></code></li>
<li><code><a href="reference/grapes-notin-grapes.html">%notin%</a></code></li>
</ul>
</div>
<div id="dplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#dplyr" class="anchor"></a>dplyr</h3>
<div id="core-verbs" class="section level5">
<h5 class="hasAnchor">
<a href="#core-verbs" class="anchor"></a>Core verbs</h5>
<ul>
<li><code><a href="reference/arrange..html">arrange.()</a></code></li>
<li><code><a href="reference/filter..html">filter.()</a></code></li>
<li>
<code><a href="reference/mutate..html">mutate.()</a></code> &amp; <code><a href="reference/mutate_across..html">mutate_across.()</a></code> - <strong>ES</strong>
<ul>
<li>The <code>_across.()</code> helper is new and can replace the <code>_if.()</code>/<code>_at.()</code>/<code>_all.()</code> helpers <a href="https://markfairbanks.github.io/tidytable/#new-variant-dt_mutate_across">See here</a>
</li>
</ul>
</li>
<li>
<code><a href="reference/select..html">select.()</a></code> - <strong>ES</strong>
</li>
<li>
<code><a href="reference/summarize..html">summarize.()</a></code>: Group by specifications called inside. <a href="https://markfairbanks.github.io/tidytable/#using-group-by">See here</a>
</li>
</ul>
</div>
<div id="other-dplyr-functions" class="section level5">
<h5 class="hasAnchor">
<a href="#other-dplyr-functions" class="anchor"></a>Other dplyr functions</h5>
<ul>
<li>
<code><a href="reference/bind_rows..html">bind_cols.()</a></code> &amp; <code><a href="reference/bind_rows..html">bind_rows.()</a></code>
</li>
<li>
<code><a href="reference/case..html">case.()</a></code>: Similar to <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">dplyr::case_when()</a></code>. See <code><a href="reference/case..html">?case.</a></code> for syntax</li>
<li>
<code><a href="reference/count..html">count.()</a></code> - <strong>ES</strong>
</li>
<li>
<code><a href="reference/distinct..html">distinct.()</a></code> - <strong>ES</strong>
</li>
<li><code><a href="reference/ifelse..html">ifelse.()</a></code></li>
<li>Joins:
<ul>
<li>
<code><a href="reference/left_join..html">left_join.()</a></code>, <code><a href="reference/left_join..html">inner_join.()</a></code>, <code><a href="reference/left_join..html">right_join.()</a></code>, <code><a href="reference/left_join..html">full_join.()</a></code>, &amp; <code><a href="reference/left_join..html">anti_join.()</a></code>
</li>
</ul>
</li>
<li><code><a href="reference/pull..html">pull.()</a></code></li>
<li><code><a href="reference/relocate..html">relocate.()</a></code></li>
<li>
<code><a href="reference/rename..html">rename.()</a></code> &amp; <code><a href="reference/rename_with..html">rename_with.()</a></code> - <strong>ES</strong>
</li>
<li><code><a href="reference/row_number..html">row_number.()</a></code></li>
<li>Select helpers:
<ul>
<li>
<code><a href="reference/starts_with..html">any_of.()</a></code>, <code><a href="reference/starts_with..html">contains.()</a></code>, <code><a href="reference/starts_with..html">everything.()</a></code> <code><a href="reference/starts_with..html">starts_with.()</a></code>, <code><a href="reference/starts_with..html">ends_with.()</a></code>
</li>
</ul>
</li>
<li>
<code><a href="reference/slice..html">slice.()</a></code>: <code>_head.()</code>/<code>_tail.()</code>/<code>_max.()</code>/<code>_min.()</code>
<ul>
<li>The <code>slice_*()</code> helpers are like <code><a href="reference/top_n..html">top_n.()</a></code>, but are a bit easier to use</li>
</ul>
</li>
<li><code><a href="reference/top_n..html">top_n.()</a></code></li>
<li><code><a href="reference/transmute..html">transmute.()</a></code></li>
</ul>
</div>
</div>
<div id="tidyr" class="section level3">
<h3 class="hasAnchor">
<a href="#tidyr" class="anchor"></a>tidyr</h3>
<ul>
<li>
<code><a href="reference/drop_na..html">drop_na.()</a></code> - <strong>ES</strong>
</li>
<li>
<code><a href="reference/fill..html">fill.()</a></code>: Works on character/factor/logical types (<code><a href="https://Rdatatable.gitlab.io/data.table/reference/nafill.html">data.table::nafill()</a></code> does not) - <strong>ES</strong>
</li>
<li>
<code><a href="reference/group_split..html">group_split.()</a></code> - <strong>ES</strong>
</li>
<li>Nesting: <code><a href="reference/nest_by..html">nest_by.()</a></code> - <strong>ES</strong> &amp; <code><a href="reference/unnest..html">unnest.()</a></code>
</li>
<li>
<code><a href="reference/pivot_longer..html">pivot_longer.()</a></code> - <strong>ES</strong> &amp; <code><a href="reference/pivot_wider..html">pivot_wider.()</a></code> - <strong>ES</strong>
</li>
<li><code><a href="reference/replace_na..html">replace_na.()</a></code></li>
<li><code><a href="reference/separate..html">separate.()</a></code></li>
<li><code><a href="reference/unite..html">unite.()</a></code></li>
</ul>
</div>
<div id="purrr" class="section level3">
<h3 class="hasAnchor">
<a href="#purrr" class="anchor"></a>purrr</h3>
<ul>
<li>
<code><a href="reference/map..html">map.()</a></code>, <code><a href="reference/map..html">map2.()</a></code>, <code>map_*.()</code> variants, &amp; <code>map2_*.()</code> variants</li>
</ul>
</div>
</div>
<div id="general-syntax" class="section level2">
<h2 class="hasAnchor">
<a href="#general-syntax" class="anchor"></a>General syntax</h2>
<p><code>tidytable</code> uses <code>verb.()</code> syntax to replicate <code>tidyverse</code> functions:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">data.table</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidytable</span>)

<span class="no">test_df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>), <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>), <span class="kw">z</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"a"</span>,<span class="st">"b"</span>))

<span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/select..html">select.</a></span>(<span class="no">x</span>, <span class="no">y</span>, <span class="no">z</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/filter..html">filter.</a></span>(<span class="no">x</span> <span class="kw">&lt;</span> <span class="fl">4</span>, <span class="no">y</span> <span class="kw">&gt;</span> <span class="fl">1</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/arrange..html">arrange.</a></span>(<span class="no">x</span>, <span class="no">y</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/mutate..html">mutate.</a></span>(<span class="kw">double_x</span> <span class="kw">=</span> <span class="no">x</span> * <span class="fl">2</span>,
          <span class="kw">double_y</span> <span class="kw">=</span> <span class="no">y</span> * <span class="fl">2</span>)
<span class="co">#&gt;        x     y     z double_x double_y</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1:     1     4     a        2        8</span>
<span class="co">#&gt; 2:     2     5     a        4       10</span>
<span class="co">#&gt; 3:     3     6     b        6       12</span></pre></div>
</div>
<div id="using-group-by" class="section level2">
<h2 class="hasAnchor">
<a href="#using-group-by" class="anchor"></a>Using “group by”</h2>
<p>Group by calls are done from inside any function that has group by functionality (such as <code><a href="reference/summarize..html">summarize.()</a></code> &amp; <code><a href="reference/mutate..html">mutate.()</a></code>)</p>
<ul>
<li>A single column can be passed with <code>by = z</code>
</li>
<li>Multiple columns can be passed with <code>by = c(y, z)</code> or <code>by = list(y, z)</code>
</li>
<li>
<a href="https://markfairbanks.github.io/tidytable/#enhanced-selection">Enhanced selection</a> can also be used:
<ul>
<li>Single predicate: <code>by = is.character</code>
</li>
<li>Multiple predicates: <code>by = c(is.character, is.factor)</code>
</li>
<li>A combination of predicates and column names: <code>by = c(is.character, y)</code>
</li>
</ul>
</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb4"><pre class="r"><span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/summarize..html">summarize.</a></span>(<span class="kw">avg_x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">x</span>),
             <span class="kw">count</span> <span class="kw">=</span> <span class="fu"><a href="reference/n..html">n.</a></span>(),
             <span class="kw">by</span> <span class="kw">=</span> <span class="no">z</span>)
<span class="co">#&gt;        z avg_x count</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1:     a   1.5     2</span>
<span class="co">#&gt; 2:     b   3.0     1</span></pre></div>
</div>
<div id="enhanced-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#enhanced-selection" class="anchor"></a>Enhanced selection</h2>
<p>Enhanced selection allows you to mix predicates like <code>is.numeric</code> with normal selection.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">test_df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw">a</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>),
                      <span class="kw">b</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>),
                      <span class="kw">c</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"a"</span>,<span class="st">"b"</span>),
                      <span class="kw">d</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>))

<span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/select..html">select.</a></span>(<span class="no">is.numeric</span>, <span class="no">d</span>)
<span class="co">#&gt;        a     b     d</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1:     1     4     a</span>
<span class="co">#&gt; 2:     2     5     b</span>
<span class="co">#&gt; 3:     3     6     c</span></pre></div>
<p>You can also use this format to drop columns:</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/select..html">select.</a></span>(-<span class="no">is.numeric</span>)
<span class="co">#&gt;        c     d</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1:     a     a</span>
<span class="co">#&gt; 2:     a     b</span>
<span class="co">#&gt; 3:     b     c</span></pre></div>
<p>Currently supported predicates: <code>is.numeric</code>/<code>is.integer</code>/<code>is.double</code>/<code>is.character</code>/<code>is.factor</code>/<code>is.list</code></p>
<p>Functions that support enhanced selection will be noted in their documentation.</p>
<div id="new-helper-mutate_across-" class="section level4">
<h4 class="hasAnchor">
<a href="#new-helper-mutate_across-" class="anchor"></a>New helper: <code>mutate_across.()</code>
</h4>
<p>Enhanced selection allows the user to replace <code><a href="reference/mutate_if..html">mutate_if.()</a></code>, <code><a href="reference/mutate_if..html">mutate_at.()</a></code>, and <code><a href="reference/mutate_if..html">mutate_all.()</a></code> with one helper - <code><a href="reference/mutate_across..html">mutate_across.()</a></code>.</p>
<p>Using <code>_across.()</code> instead of <code>_if.()</code>:</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">test_df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw">a</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>),
                      <span class="kw">b</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>),
                      <span class="kw">c</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"a"</span>,<span class="st">"b"</span>),
                      <span class="kw">d</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>))

<span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/mutate_across..html">mutate_across.</a></span>(<span class="no">is.numeric</span>, <span class="no">as.character</span>)
<span class="co">#&gt;        a     b     c     d</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1:     1     1     a     a</span>
<span class="co">#&gt; 2:     1     1     a     b</span>
<span class="co">#&gt; 3:     1     1     b     c</span></pre></div>
<p>Using <code>_across.()</code> instead of <code>_at.()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/mutate_across..html">mutate_across.</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">a</span>, <span class="no">b</span>), ~ <span class="no">.x</span> + <span class="fl">1</span>)
<span class="co">#&gt;        a     b     c     d</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1:     2     2     a     a</span>
<span class="co">#&gt; 2:     2     2     a     b</span>
<span class="co">#&gt; 3:     2     2     b     c</span></pre></div>
<p>Using <code>_across.()</code> instead of <code>_all.()</code>:</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">test_df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/mutate_across..html">mutate_across.</a></span>(<span class="fu"><a href="reference/starts_with..html">everything.</a></span>(), <span class="no">as.factor</span>)
<span class="co">#&gt;        a     b     c     d</span>
<span class="co">#&gt;    &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;</span>
<span class="co">#&gt; 1:     1     1     a     a</span>
<span class="co">#&gt; 2:     1     1     a     b</span>
<span class="co">#&gt; 3:     1     1     b     c</span></pre></div>
</div>
</div>
<div id="rlang-compatibility" class="section level2">
<h2 class="hasAnchor">
<a href="#rlang-compatibility" class="anchor"></a><code>rlang</code> compatibility</h2>
<p><code>rlang</code> quoting/unquoting can be used to write custom functions with <code>tidytable</code> functions.</p>
<p>Note that quosures are not compatible with <code>data.table</code>, so <code><a href="https://rlang.r-lib.org/reference/nse-defuse.html">enexpr()</a></code> must be used instead of <code><a href="https://rlang.r-lib.org/reference/nse-defuse.html">enquo()</a></code>.</p>
<div id="custom-function-with-mutate-" class="section level5">
<h5 class="hasAnchor">
<a href="#custom-function-with-mutate-" class="anchor"></a>Custom function with <code>mutate.()</code>
</h5>
<div class="sourceCode" id="cb10"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rlang</span>)

<span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>), <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>), <span class="kw">z</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"a"</span>,<span class="st">"b"</span>))

<span class="no">add_one</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">.data</span>, <span class="no">add_col</span>) {
  <span class="no">add_col</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/nse-defuse.html">enexpr</a></span>(<span class="no">add_col</span>)

  <span class="no">.data</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/mutate..html">mutate.</a></span>(<span class="kw">new_col</span> <span class="kw">=</span> !!<span class="no">add_col</span> + <span class="fl">1</span>)
}

<span class="no">df</span> <span class="kw">%&gt;%</span>
  <span class="fu">add_one</span>(<span class="no">x</span>)
<span class="co">#&gt;        x     y     z new_col</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1:     1     1     a       2</span>
<span class="co">#&gt; 2:     1     1     a       2</span>
<span class="co">#&gt; 3:     1     1     b       2</span></pre></div>
</div>
<div id="custom-function-with-summarize-" class="section level5">
<h5 class="hasAnchor">
<a href="#custom-function-with-summarize-" class="anchor"></a>Custom function with <code>summarize.()</code>
</h5>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">10</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"a"</span>, <span class="fl">6</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"b"</span>, <span class="fl">4</span>)), <span class="kw">z</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"a"</span>, <span class="fl">6</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"b"</span>, <span class="fl">4</span>)))

<span class="no">find_mean</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">.data</span>, <span class="no">grouping_cols</span>, <span class="no">col</span>) {
  <span class="no">grouping_cols</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/nse-defuse.html">enexpr</a></span>(<span class="no">grouping_cols</span>)
  <span class="no">col</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/nse-defuse.html">enexpr</a></span>(<span class="no">col</span>)

  <span class="no">.data</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/summarize..html">summarize.</a></span>(<span class="kw">avg</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(!!<span class="no">col</span>),
               <span class="kw">by</span> <span class="kw">=</span> !!<span class="no">grouping_cols</span>)
}

<span class="no">df</span> <span class="kw">%&gt;%</span>
  <span class="fu">find_mean</span>(<span class="kw">grouping_cols</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">y</span>, <span class="no">z</span>), <span class="kw">col</span> <span class="kw">=</span> <span class="no">x</span>)
<span class="co">#&gt;        y     z   avg</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1:     a     a   3.5</span>
<span class="co">#&gt; 2:     b     b   8.5</span></pre></div>
</div>
</div>
<div id="dt-helper" class="section level2">
<h2 class="hasAnchor">
<a href="#dt-helper" class="anchor"></a><code>dt()</code> helper</h2>
<p>The <code><a href="reference/dt.html">dt()</a></code> function makes regular <code>data.table</code> syntax pipeable, so you can easily mix <code>tidytable</code> syntax with <code>data.table</code> syntax:</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>), <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>), <span class="kw">z</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>))

<span class="no">df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/dt.html">dt</a></span>(, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">x</span>, <span class="no">y</span>, <span class="no">z</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/dt.html">dt</a></span>(<span class="no">x</span> <span class="kw">&lt;</span> <span class="fl">4</span> <span class="kw">&amp;</span> <span class="no">y</span> <span class="kw">&gt;</span> <span class="fl">1</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/dt.html">dt</a></span>(<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span>(<span class="no">x</span>, <span class="no">y</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/dt.html">dt</a></span>(, <span class="st">':='</span>(<span class="kw">double_x</span> <span class="kw">=</span> <span class="no">x</span> * <span class="fl">2</span>,
            <span class="kw">double_y</span> <span class="kw">=</span> <span class="no">y</span> * <span class="fl">2</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/dt.html">dt</a></span>(, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">avg_x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(<span class="no">x</span>)), <span class="kw">by</span> <span class="kw">=</span> <span class="no">z</span>)
<span class="co">#&gt;        z avg_x</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1:     a   1.5</span>
<span class="co">#&gt; 2:     b   3.0</span></pre></div>
<div id="speed-comparisons" class="section level3">
<h3 class="hasAnchor">
<a href="#speed-comparisons" class="anchor"></a>Speed Comparisons</h3>
<p>Below are some speed comparisons of various functions. More functions will get added to the speed comps over time.</p>
<p>A few notes:</p>
<ul>
<li>Comparing times from separate functions won’t be very useful. For example - the <code>summarize()</code> tests were performed on a different dataset from <code>case_when()</code>.</li>
<li>
<code><a href="https://Rdatatable.gitlab.io/data.table/reference/openmp-utils.html">setDTthreads(4)</a></code> was used for <code>data.table</code> &amp; <code>tidytable</code> timings.</li>
<li>Modify-by-reference was used in <code>data.table</code> when being compared to <code><a href="reference/mutate..html">mutate.()</a></code> &amp; <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code>
</li>
<li>
<code><a href="reference/fill..html">fill.()</a></code> &amp; <code><a href="https://tidyr.tidyverse.org/reference/fill.html">tidyr::fill()</a></code> both work with character/factor/logical columns, whereas <code><a href="https://Rdatatable.gitlab.io/data.table/reference/nafill.html">data.table::nafill()</a></code> does not. Testing only included numeric columns due to this constraint.</li>
<li>Currently <code>data.table</code> doesn’t have its own <code>case_when()</code> translation, so a multiple nested <code><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">fifelse()</a></code> was used.</li>
<li>All tests can be found in the source code of the README.</li>
<li>
<code>pandas</code> comparisons are in the process of being added - more will be added soon.</li>
<li>Lastly I’d like to mention that these tests were not rigorously created to cover all angles equally. They are just meant to be used as general insight into the performance of these packages.</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb13"><pre class="r"><span class="no">all_marks</span>
<span class="co">#&gt; # A tibble: 13 x 6</span>
<span class="co">#&gt;    function_tested tidyverse tidytable data.table pandas tidytable_vs_tidyverse</span>
<span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                 </span>
<span class="co">#&gt;  1 arrange         433.6ms   38.6ms    38.3ms     297ms  8.9%                  </span>
<span class="co">#&gt;  2 case_when       494ms     154ms     146ms      307ms  31.2%                 </span>
<span class="co">#&gt;  3 distinct        91.9ms    18.3ms    18.4ms     287ms  19.9%                 </span>
<span class="co">#&gt;  4 fill            112.2ms   34.7ms    29.5ms     146ms  30.9%                 </span>
<span class="co">#&gt;  5 filter          262ms     214ms     214ms      656ms  81.7%                 </span>
<span class="co">#&gt;  6 inner_join      63.1ms    53ms      43.6ms     &lt;NA&gt;   84.0%                 </span>
<span class="co">#&gt;  7 left_join       67ms      38.5ms    39.9ms     &lt;NA&gt;   57.5%                 </span>
<span class="co">#&gt;  8 mutate          69.6ms    55ms      78.3ms     85.2ms 79.0%                 </span>
<span class="co">#&gt;  9 nest            27.41ms   5.94ms    6.57ms     &lt;NA&gt;   21.7%                 </span>
<span class="co">#&gt; 10 pivot_longer    46.34ms   9.42ms    9.3ms      &lt;NA&gt;   20.3%                 </span>
<span class="co">#&gt; 11 pivot_wider     97.5ms    74.8ms    67.4ms     &lt;NA&gt;   76.7%                 </span>
<span class="co">#&gt; 12 summarize       439.9ms   97.4ms    170ms      780ms  22.1%                 </span>
<span class="co">#&gt; 13 unnest          161.42ms  7.95ms    7.15ms     &lt;NA&gt;   4.9%</span></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=tidytable">https://​cloud.r-project.org/​package=tidytable</a>
</li>
<li>Browse source code at <br><a href="https://github.com/markfairbanks/tidytable/">https://​github.com/​markfairbanks/​tidytable/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/markfairbanks/tidytable/issues">https://​github.com/​markfairbanks/​tidytable/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mark Fairbanks <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=tidytable"><img src="https://www.r-pkg.org/badges/version/tidytable" alt="CRAN status"></a></li>
<li><a href="https://github.com/markfairbanks/tidytable"><img src="https://img.shields.io/badge/dev%20-0.4.0.9-green.svg"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
<li><a href="https://r-pkg.org/pkg/tidytable"><img src="https://cranlogs.r-pkg.org/badges/last-month/tidytable?color=grey" alt="CRAN RStudio mirror downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Mark Fairbanks.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
